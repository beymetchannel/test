name: Manual Scraper Test (FINAL1 SIMPLE FIX)

on:
 workflow_dispatch:

jobs:
  test-run:
    runs-on: ubuntu-latest

    steps:
      # ... (Set up Python, Force Install Selenium, Run scraper.py ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ãã®ã¾ã¾)

      - name: Run scraper.py
        run: python scraper.py
      
      # =========================================================
      # ğŸš¨ æ–°ã—ã„ã‚¹ãƒ†ãƒƒãƒ—ï¼šJSONãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ä¿å­˜
      # =========================================================
      - name: Commit and Push new data
        # JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œãªã‹ã£ãŸå ´åˆã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã—ãªã„ãŸã‚ã®è¨­å®š
        id: commit
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          
          # JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã«è¿½åŠ 
          git add events.json
          
          # å¤‰æ›´ãŒãªã„å ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—
          if git diff --cached --exit-code; then
            echo "::set-output name=commit_status::no_changes"
          else
            # ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
            git commit -m "ğŸ¤– Chore: Update event data via GitHub Actions"
            echo "::set-output name=commit_status::committed"
          fi
          
      - name: Push changes
        if: steps.commit.outputs.commit_status == 'committed'
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ github.ref_name }} # ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥
